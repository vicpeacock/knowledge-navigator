# Google Cloud Run Environment Variables
# Copia questo file come .env.cloud-run e compila i valori

# Database Configuration
# Per Cloud SQL: postgresql+asyncpg://user:pass@/dbname?host=/cloudsql/PROJECT:REGION:INSTANCE
# Per database esterno: postgresql+asyncpg://user:pass@host:port/dbname
DATABASE_URL=postgresql+asyncpg://knavigator:PASSWORD@/knowledge_navigator?host=/cloudsql/PROJECT_ID:REGION:INSTANCE_NAME
POSTGRES_HOST=/cloudsql/PROJECT_ID:REGION:INSTANCE_NAME
POSTGRES_USER=knavigator
POSTGRES_PASSWORD=YOUR_SECURE_PASSWORD
POSTGRES_DB=knowledge_navigator
POSTGRES_PORT=5432

# ChromaDB Configuration
# Se ChromaDB è deployato separatamente, usa URL esterno
CHROMADB_HOST=your-chromadb-host.com
CHROMADB_PORT=443

# Security Keys (GENERA VALORI SICURI!)
SECRET_KEY=your-secret-key-min-32-characters-long
ENCRYPTION_KEY=your-32-byte-encryption-key-exactly-32-chars
JWT_SECRET_KEY=your-jwt-secret-key-min-32-characters-long
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# LLM Provider Selection
# For cloud deployment, use Gemini (no GPU needed)
LLM_PROVIDER=gemini

# Gemini Configuration
# Get API key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-1.5-pro
# GEMINI_BACKGROUND_MODEL=gemini-1.5-flash  # Optional: faster model for background tasks
# GEMINI_PLANNER_MODEL=gemini-1.5-flash  # Optional: faster model for planning

# Vertex AI Configuration (alternative to Gemini API REST)
# Set GEMINI_USE_VERTEX_AI=true to use Vertex AI instead of Gemini API REST
# Vertex AI uses Application Default Credentials (ADC) - no API key needed
# Vertex AI may have different safety policies and can resolve blocking issues
GEMINI_USE_VERTEX_AI=true
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project-id
GOOGLE_CLOUD_LOCATION=us-central1

# Note: Ollama configuration is not needed for cloud deployment
# Cloud deployment uses Gemini API or Vertex AI instead

# Google OAuth2 (per Calendar/Email integrations)
GOOGLE_CLIENT_ID=your-google-oauth-client-id
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret

# Google Workspace MCP Server OAuth (per Google Workspace MCP server)
# Credenziali dell'applicazione (condivise da tutti gli utenti)
# Ogni utente autentica separatamente con il proprio account Google quando usa i tools
# Puoi usare le stesse credenziali di sopra (GOOGLE_CLIENT_ID/SECRET) o crearne di separate
GOOGLE_OAUTH_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_OAUTH_CLIENT_SECRET=your-google-oauth-client-secret
# OAuth 2.1 multi-user è abilitato automaticamente con MCP_ENABLE_OAUTH21=true nel docker-compose.yml

# MCP Gateway (se deployato separatamente)
MCP_GATEWAY_URL=https://your-mcp-gateway.run.app
MCP_GATEWAY_AUTH_TOKEN=optional-bearer-token

# Email Configuration (opzionale)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@yourdomain.com

# Feature Flags
USE_LANGGRAPH_PROTOTYPE=true

# Memory Settings
SHORT_TERM_MEMORY_TTL=3600
MEDIUM_TERM_MEMORY_DAYS=30
LONG_TERM_IMPORTANCE_THRESHOLD=0.7
MAX_CONTEXT_TOKENS=8000
CONTEXT_KEEP_RECENT_MESSAGES=10

# Semantic Integrity
INTEGRITY_CONFIDENCE_THRESHOLD=0.85
INTEGRITY_MAX_SIMILAR_MEMORIES=5
INTEGRITY_CHECK_EXHAUSTIVE=false
INTEGRITY_MIN_IMPORTANCE=0.7

# File Upload
MAX_FILE_SIZE=10485760

# Port (Cloud Run usa PORT env var automaticamente)
PORT=8000

